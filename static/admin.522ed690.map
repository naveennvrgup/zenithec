{"version":3,"sources":["js/admin.js"],"names":["burl","div_clients","document","querySelector","err_msg","after_fetched_clients","trashes","querySelectorAll","forEach","ele","id","dataset","cid","btn","addEventListener","e","innerHTML","fetch","method","then","d","json","remove","nul","catch","console","log","reverse","div_ele","_id","name","phone","email","task","date"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,IAAI,GAAG,EAAX;AACA,IAAIC,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAlB;;AAEA,IAAI,kBAAyB,aAA7B,EAA4C;AACxCH,EAAAA,IAAI,GAAG,uBAAP;AACH;;AAED,IAAII,OAAO,gQAAX;;AAUA,IAAIC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAC9B,MAAIC,OAAO,GAAGJ,QAAQ,CAACK,gBAAT,CAA0B,SAA1B,CAAd;AACAD,EAAAA,OAAO,CAACE,OAAR,CAAgB,UAAAC,GAAG,EAAI;AACnB,QAAIC,EAAE,GAAGD,GAAG,CAACE,OAAJ,CAAYC,GAArB;AACA,QAAIC,GAAG,GAAGJ,GAAG,CAACN,aAAJ,CAAkB,oBAAlB,CAAV;AAEAU,IAAAA,GAAG,CAACC,gBAAJ,CAAqB,OAArB,EAA8B,UAAAC,CAAC,EAAI;AAC/BF,MAAAA,GAAG,CAACG,SAAJ,GAAgB,mDAAhB;AACAC,MAAAA,KAAK,CAACjB,IAAI,GAAG,WAAP,GAAqBU,EAAtB,EAA0B;AACvBQ,QAAAA,MAAM,EAAE;AADe,OAA1B,CAAL,CAGKC,IAHL,CAGU,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,OAHX,EAIKF,IAJL,CAIU,UAAAC,CAAC;AAAA,eAAIA,CAAC,GAAGX,GAAG,CAACa,MAAJ,EAAH,GAAkBC,GAAvB;AAAA,OAJX,EAKKC,KALL,CAKW,UAAAT,CAAC,EAAI;AACRF,QAAAA,GAAG,CAACG,SAAJ,GAAgB,YAAhB;AACH,OAPL;AAQH,KAVD;AAWH,GAfD;AAgBH,CAlBD;;AAoBAC,KAAK,CAACjB,IAAI,GAAG,UAAR,CAAL,CACKmB,IADL,CACU,UAAAC,CAAC;AAAA,SAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,CADX,EAEKF,IAFL,CAEU,UAAAC,CAAC,EAAI;AACPK,EAAAA,OAAO,CAACC,GAAR,CAAYN,CAAZ;AACAA,EAAAA,CAAC,CAACO,OAAF;AACA1B,EAAAA,WAAW,CAACe,SAAZ,GAAsB,EAAtB;AACAI,EAAAA,CAAC,CAACZ,OAAF,CAAU,UAAAC,GAAG,EAAI;AACb,QAAImB,OAAO,kGAC4DnB,GAAG,CAACoB,GADhE,sJAIyBpB,GAAG,CAACqB,IAJ7B,oEAK0BrB,GAAG,CAACsB,KAL9B,oEAM0BtB,GAAG,CAACuB,KAN9B,sEAO4BvB,GAAG,CAACwB,IAPhC,mEAQyBxB,GAAG,CAACyB,IAR7B,+YAAX;AAkBAjC,IAAAA,WAAW,CAACe,SAAZ,IAAyBY,OAAzB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYjB,GAAZ;AACH,GArBD;AAsBAJ,EAAAA,qBAAqB;AACxB,CA7BL,EA8BKmB,KA9BL,CA8BW,UAAAT,CAAC,EAAI;AACRd,EAAAA,WAAW,CAACe,SAAZ,GAAwBZ,OAAxB;AACH,CAhCL","file":"admin.522ed690.map","sourceRoot":"..\\src","sourcesContent":["let burl = ''\r\nlet div_clients = document.querySelector('#clients');\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n    burl = 'http://localhost:3000'\r\n}\r\n\r\nlet err_msg = `\r\n            <h2 class='text-danger text-center p-2'>\r\n                mayday <br>\r\n                mayday <br>\r\n                mayday <br>\r\n                can't fetch from database <br>\r\n                try again later\r\n            </h2>\r\n        `\r\n\r\nlet after_fetched_clients = () => {\r\n    let trashes = document.querySelectorAll('.client');\r\n    trashes.forEach(ele => {\r\n        let id = ele.dataset.cid\r\n        let btn = ele.querySelector('.delete_client_btn')\r\n\r\n        btn.addEventListener('click', e => {\r\n            btn.innerHTML = '<i class=\"fa fa-spinner fa-spin text-danger\"></i>'\r\n            fetch(burl + '/clients/' + id, {\r\n                    method: 'delete'\r\n                })\r\n                .then(d => d.json())\r\n                .then(d => d ? ele.remove() : nul)\r\n                .catch(e => {\r\n                    btn.innerHTML = 'some error'\r\n                })\r\n        })\r\n    })\r\n}\r\n\r\nfetch(burl + '/clients')\r\n    .then(d => d.json())\r\n    .then(d => {\r\n        console.log(d)\r\n        d.reverse()\r\n        div_clients.innerHTML=''\r\n        d.forEach(ele => {\r\n            let div_ele = `\r\n                <div class=\"client border border-dark rounded my-2 p-2\" data-cid=${ele._id}>\r\n                    <div class='row'>\r\n                        <div class='col-md-10'>\r\n                            <div><b>Name: </b>${ele.name}</div>\r\n                            <div><b>Phone: </b>${ele.phone}</div>\r\n                            <div><b>Email: </b>${ele.email}</div>\r\n                            <div><b>Project: </b>${ele.task}</div>\r\n                            <div><b>Time: </b>${ele.date}</div>\r\n                        </div>\r\n                        <div class='col-md-2 align-self-center text-center'>\r\n                            <button class='btn delete_client_btn'>\r\n                                <i class='fa fa-trash text-danger'></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `\r\n            div_clients.innerHTML += div_ele\r\n            console.log(ele)\r\n        })\r\n        after_fetched_clients()\r\n    })\r\n    .catch(e => {\r\n        div_clients.innerHTML = err_msg\r\n    })"]}