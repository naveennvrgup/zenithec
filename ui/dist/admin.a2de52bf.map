{"version":3,"sources":["js/admin.js"],"names":["burl","div_clients","document","querySelector","err_msg","after_fetched_clients","querySelectorAll","forEach","ele","id","dataset","cid","btn","addEventListener","e","innerHTML","fetch","method","then","d","json","remove","nul","catch","console","log","reverse","div_ele","_id","name","phone","email","task","date"],"mappings":";AAAA,IAAIA,EAAO,GACPC,EAAcC,SAASC,cAAc,YAMzC,IAAIC,EAAJ,8PAUIC,EAAwB,WACVH,SAASI,iBAAiB,WAChCC,QAAQ,SAAAC,GACRC,IAAAA,EAAKD,EAAIE,QAAQC,IACjBC,EAAMJ,EAAIL,cAAc,sBAE5BS,EAAIC,iBAAiB,QAAS,SAAAC,GAC1BF,EAAIG,UAAY,oDAChBC,MAAMhB,EAAO,YAAcS,EAAI,CACvBQ,OAAQ,WAEXC,KAAK,SAAAC,GAAKA,OAAAA,EAAEC,SACZF,KAAK,SAAAC,GAAKA,OAAAA,EAAIX,EAAIa,SAAWC,MAC7BC,MAAM,SAAAT,GACHF,EAAIG,UAAY,oBAMpCC,MAAMhB,EAAO,YACRkB,KAAK,SAAAC,GAAKA,OAAAA,EAAEC,SACZF,KAAK,SAAAC,GACFK,QAAQC,IAAIN,GACZA,EAAEO,UACFzB,EAAYc,UAAU,GACtBI,EAAEZ,QAAQ,SAAAC,GACFmB,IAAAA,EACmEnB,sFAAAA,OAAAA,EAAIoB,IAGvCpB,6IAAAA,OAAAA,EAAIqB,KACHrB,2DAAAA,OAAAA,EAAIsB,MACJtB,2DAAAA,OAAAA,EAAIuB,MACFvB,6DAAAA,OAAAA,EAAIwB,KACPxB,0DAAAA,OAAAA,EAAIyB,KARxC,8YAkBAhC,EAAYc,WAAaY,EACzBH,QAAQC,IAAIjB,KAEhBH,MAEHkB,MAAM,SAAAT,GACHb,EAAYc,UAAYX","file":"admin.a2de52bf.map","sourceRoot":"..\\src","sourcesContent":["let burl = ''\r\nlet div_clients = document.querySelector('#clients');\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n    burl = 'http://localhost:3000'\r\n}\r\n\r\nlet err_msg = `\r\n            <h2 class='text-danger text-center p-2'>\r\n                mayday <br>\r\n                mayday <br>\r\n                mayday <br>\r\n                can't fetch from database <br>\r\n                try again later\r\n            </h2>\r\n        `\r\n\r\nlet after_fetched_clients = () => {\r\n    let trashes = document.querySelectorAll('.client');\r\n    trashes.forEach(ele => {\r\n        let id = ele.dataset.cid\r\n        let btn = ele.querySelector('.delete_client_btn')\r\n\r\n        btn.addEventListener('click', e => {\r\n            btn.innerHTML = '<i class=\"fa fa-spinner fa-spin text-danger\"></i>'\r\n            fetch(burl + '/clients/' + id, {\r\n                    method: 'delete'\r\n                })\r\n                .then(d => d.json())\r\n                .then(d => d ? ele.remove() : nul)\r\n                .catch(e => {\r\n                    btn.innerHTML = 'some error'\r\n                })\r\n        })\r\n    })\r\n}\r\n\r\nfetch(burl + '/clients')\r\n    .then(d => d.json())\r\n    .then(d => {\r\n        console.log(d)\r\n        d.reverse()\r\n        div_clients.innerHTML=''\r\n        d.forEach(ele => {\r\n            let div_ele = `\r\n                <div class=\"client border border-dark rounded my-2 p-2\" data-cid=${ele._id}>\r\n                    <div class='row'>\r\n                        <div class='col-md-10'>\r\n                            <div><b>Name: </b>${ele.name}</div>\r\n                            <div><b>Phone: </b>${ele.phone}</div>\r\n                            <div><b>Email: </b>${ele.email}</div>\r\n                            <div><b>Project: </b>${ele.task}</div>\r\n                            <div><b>Time: </b>${ele.date}</div>\r\n                        </div>\r\n                        <div class='col-md-2 align-self-center text-center'>\r\n                            <button class='btn delete_client_btn'>\r\n                                <i class='fa fa-trash text-danger'></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `\r\n            div_clients.innerHTML += div_ele\r\n            console.log(ele)\r\n        })\r\n        after_fetched_clients()\r\n    })\r\n    .catch(e => {\r\n        div_clients.innerHTML = err_msg\r\n    })"]}